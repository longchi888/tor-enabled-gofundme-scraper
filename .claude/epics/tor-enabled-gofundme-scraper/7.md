---
id: task-006
title: 资源收集重构
epic: tor-enabled-gofundme-scraper
type: task
status: todo
priority: high
created: 2025-09-14T22:14:31Z
updated: 2025-09-14T22:24:04Z
dependencies:
  - task-003
blocks: []
parallel: true
estimate: 2 days
---

# 资源收集重构

## 目标
利用Crawl4AI内置的资源收集功能重构现有的手动资源下载逻辑，简化代码复杂度并提升下载效率。

## 需求描述

### 核心功能
- 基于Crawl4AI内置资源提取能力
- 智能资源发现和分类
- 断点续传和并发下载
- 完整的资源管理生命周期

### 技术要求
- 重构ResourceCollector类使用Crawl4AI功能
- 实现智能资源过滤和优先级排序
- 集成异步下载管理器
- 保持现有目录结构兼容性

### 实现细节
- **资源发现**: 利用Crawl4AI自动发现页面中的图片、视频、文档等资源
- **智能过滤**: 基于文件大小、类型、重要性进行资源筛选
- **并发下载**: 异步下载管理，支持限速和重试
- **目录管理**: 保持`scraped_resources_ultra/`目录结构不变

### 资源类型处理
1. **图片资源**: JPG/PNG/GIF等，支持缩略图和原图
2. **视频资源**: MP4/WEBM等，优先下载封面图
3. **文档资源**: PDF/DOC等附件文件
4. **其他媒体**: 音频文件、动画等

## 验收标准
- [ ] ResourceCollector重构完成
- [ ] 资源发现准确率 ≥ 90%
- [ ] 下载成功率 ≥ 85%
- [ ] 断点续传功能正常工作
- [ ] 并发下载不超过系统限制
- [ ] 目录结构与现有脚本完全一致
- [ ] 单元测试覆盖所有下载场景
- [ ] 性能测试：下载时间优化 ≥ 20%

## 技术债务
- 添加资源去重机制
- 实现智能带宽管理
- 考虑CDN资源的特殊处理

## 风险评估
- **中等**: 网络连接不稳定影响下载
- **低**: 资源URL格式变化
- **低**: 并发下载对系统资源影响

## 相关文件
- crawl4ai/content_filter_strategy.py (资源过滤)
- gofundme/scrape_gofundme_enhanced.py (现有下载逻辑)
- crawl4ai/utils.py (工具函数)

## 并行开发说明
此任务可以与task-005(智能数据提取)并行开发，专注于资源收集功能的优化，最终在task-007中与数据提取功能集成。